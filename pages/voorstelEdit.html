<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mijn Voorstel Edit</title>
    <link rel="stylesheet" href="../styles/header.css">
    <link rel="stylesheet" href="../styles/style.css">

    <style>
    .grid-container {
      display: grid;
      grid-template-columns: auto auto auto;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
      gap: 10px;
      padding: 10px;
    }
    
    .grid-container > div {
      background-color: rgba(255, 255, 255, 0.8);
    }

    table, th, td {
        border: none;
    }

    .flexRow {
        display: flex;
        flex-direction: row;
        margin: 5px;
    }

    td {
        display: flex;
        flex-direction: row;
    }

    label {
        width: 6.3em;
        font-size: larger;
    }
    </style>

    <script>

        var voorstelID;
        window.onload = function () {
        this.voorstelID = window.location.href.split("=").pop();
        const response = fetch(`http://localhost:8082/voorstel/geefVoorstelPerId/${voorstelID}`)
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            document.getElementById("inputNaam").value = data.voornaam + " " + data.achternaam;
            document.getElementById("inputEmail").value = data.eMail;
            document.getElementById("inputOnderwerp").value = data.onderwerp;
            document.getElementById("inputSamenvatting").value = data.samenvatting;
            document.getElementById("inputVoornaam").value = data.voornaam;
            document.getElementById("inputAchternaam").value = data.achternaam;
            document.getElementById("inputEmailToevoegen").value = data.eMail;
            document.getElementById("statusTegel").value = data.status;
          });
      };

      function slaWijzigingenInVoorstelOp() {
            var xhr = new XMLHttpRequest();
            var geupdateVoorstel = {};
            geupdateVoorstel.id = voorstelID;
            geupdateVoorstel.voornaam = document.getElementById("inputVoornaam").value;
            geupdateVoorstel.achternaam = document.getElementById("inputAchternaam").value;
            geupdateVoorstel.eMail = document.getElementById("inputEmail").value;
            geupdateVoorstel.onderwerp = document.getElementById("inputOnderwerp").value;
            geupdateVoorstel.samenvatting = document.getElementById("inputSamenvatting").value;
            geupdateVoorstel.status = document.getElementById("statusTegel").value;
            geupdateVoorstel.tijdsduur = document.getElementById("inputTijdsduur").value;
            geupdateVoorstel.maximaleCapaciteit = document.getElementById("inputCapaciteit").value;
            // geupdateVoorstel.tijdsduur = document.getElementById("inputCategorie").value;

            JSONstatement = JSON.stringify(geupdateVoorstel);      
            console.log(JSONstatement);         
            xhr.open("PUT", "http://localhost:8082/voorstel/updateVoorstel/" + this.voorstelID, true);          
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(JSONstatement);
      }

    </script>

</head>
<body>

    <header class="hdr-main">
        <img src="../images/TopicusLogo.png" class="hdr-img">
        <div class="hdr-btns">
            <p class="hdr-btns-text">Je bent ingelogd als: XYZ</p>
            <button class="hdr-btns-btn" >Profiel</button>
            <button class="hdr-btns-btn">Uitloggen</button>
        </div>
    </header>

    <div class="grid-container">
        <div>
            <table>
                <tr>
                    <td>
                        <h3>Spreker</h3>
                        <p></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="Naam">Naam: </label>
                        <input id="inputNaam" type="text">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="Email">Email:</label>
                        <input id="inputEmail" type="text" placeholder="John@email.com">
                    </td>
                </tr>
            </table>
        </div>

        <div>
            <table>
                <tr>
                    <td>
                        <h3>Presentatie</h3>
                        <p></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="Onderwerp">Onderwerp: </label>
                        <input id="inputOnderwerp" type="text">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="Beschrijving">Beschrijving:</label>
                        <textarea name="Samenvatting" id="inputSamenvatting" cols="21" rows="5"></textarea>
                    </td>
                </tr>
            </table>
        </div>

        <div>
            <table>
                <tr>
                    <td>
                        <h3>Status</h3>
                        <p></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div>
                            <input id="statusTegel" type="text" style="background-color: aquamarine; width:60px; text-align: center;">
                        </div>
                        <div>
                            <!-- Dummy division voor de uitlijning-->
                        </div>
                    </td>
                </tr>
            </table>
        </div> 

        <div>
            <div class="flexRow">
                <h2>Voeg spreker toe</h2>
                <p></p>
            </div>
            <div style="border: 1px solid slategrey; width: 300px; height: 120px; border-radius: 3px;">
                <div class="flexRow">
                    <label for="Voornaam">Voornaam: </label>
                    <input id="inputVoornaam" type="text" style="float: right;">
                </div>
                <div class="flexRow">
                    <label for="Achternaam">Achternaam</label>
                    <input id="inputAchternaam" type="text">
                </div>
                <div class="flexRow">
                    <label for="Email">Email:</label>
                    <input id="inputEmailToevoegen" type="text">
                </div>
                <div style="float: right; margin-right: 5px;">
                    <button>Toevoegen</button>
                </div>
            </div>
        </div>

        <div>
            <div class="flexRow" style="height: 4em;">
                <!-- Deze div wordt gebruikt om het veld midden onder op de pagina uit te lijnen met naastgelegen blok -->
            </div>
            <div style="height: 120px;">
                <div class="flexRow">
                    <label for="tijdsduur">Tijdsduur: </label>
                    <input id="inputTijdsduur" type="text">
                </div>
                <div class="flexRow">
                    <label for="MaxCapaciteit">Max. Capaciteit: </label>
                    <input id="inputCapaciteit" type="text">
                </div>
                <div class="flexRow">
                    <label for="Categorie">Categorie: </label>
                    <input id="inputCategorie" type="text">
                </div>
            </div>
        </div>

        <div>
            <table>
                <tr>
                    <td>
                        <h4>Benodigdheden</h4>
                        <p></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div>
                            <select name="BenodigdhedenDropDown" id="BenodigdhedenDropDown">
                                <option value="None">None</option>
                                <option value="Beamer">Beamer</option>
                                <option value="RookMachine">Rookmachine</option>
                                <option value="Flipperkast">Flipperkast</option>
                            </select>
                        </div>
                        <div>
                            <!-- lijst met standaard en gekozen benodigdheden -->
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div style="margin-top: 5em; margin-left: 20em;">
        <button onclick="slaWijzigingenInVoorstelOp()">Bevestigen</button>
        <button>Cancel</button>
    </div>

</body>
</html>