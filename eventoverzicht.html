<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TC - Event overzicht</title>
    <style>
        
    </style>
    <script>
        function toonEvenementen(){
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if(this.readyState == 4){
                    console.log("Evenementen opgehaald");
                    var allEvents = JSON.parse(this.responseText);
                    var eindString = "<table border=2><tr><th>Titel</th><th>Omschrijving</th><th>Begin</th><th>Eind</th>";
                        for(var x = 0; x < allEvents.length; x++){
                            eindString += "<tr><td>" + allEvents[x].naam + "</td>";
                            eindString += "<td>" + allEvents[x].omschrijving + "</td>";
                            eindString += "<td>" + allEvents[x].beginDatumTijd + "</td>";
                            eindString += "<td>" + allEvents[x].eindDatumTijd + "</td>";
                            eindString += "<td><button onclick='deleteEvent("+allEvents[x].id+")'>Delete</button></td></tr>";
                        }
                    eindString += "</table>";
                    document.getElementById("alleEvenementenTabel").innerHTML = eindString;
                }

            }
            xhr.open("GET","http://localhost:8082/event/alleEvenementen", true);
            xhr.send();
        }

        function deleteEvent(EVENTID)
        {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if(this.readyState == 4){
                    console.log("Event verwijderd");
                }
            }
            xhr.open("DELETE","http://localhost:8082/event/verwijderEvent/" + EVENTID, true);
            xhr.send();
        }
    </script>
</head>
<body onload="toonEvenementen()">
    <button onclick="toonEvenementen()">Ververs evenementen</button>
    <div id="alleEvenementenTabel"></div>
</body>
</html>